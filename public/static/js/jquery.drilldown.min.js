/**
 * A simple jQuery plugin for creating animated drilldown menus.
 *
 * @name jQuery Drilldown
 * @version 1.1.1
 * @requires jQuery v1.7+
 * @author Aleksandras Nelkinas
 * @license [MIT]{@link http://opensource.org/licenses/mit-license.php}
 *
 * Copyright (c) 2015 Aleksandras Nelkinas
 */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t,s){"use strict";var e="drilldown",i="data-next-parent",n={event:"click",selector:"a",speed:100,cssClass:{container:e+"-container",root:e+"-root",sub:e+"-sub",back:e+"-back"},level:0},o=function(){function o(s,i){var o=this;this._name=e,this._defaults=n,this.element=s,this.$element=t(s),this.options=t.extend({},n,i),this._history=[],this._css={"float":"left",width:null},this.$container=this.$element.find("."+this.options.cssClass.container),this.$element.on(this.options.event+"."+e,this.options.selector,function(s){h.call(o,s,t(this))}),this._level=0}function h(t,s){var e=s.nextAll("."+this.options.cssClass.sub),i=!0;e.length?l.call(this,e):s.closest("."+this.options.cssClass.back).length?a.call(this):i=!1,i&&"A"===s.prop("tagName")&&t.preventDefault()}function l(t,e){var n=e&&e.speed!==s?e.speed:this.options.speed;t.length&&(this._level++,this.$element.data("level",this._level),this._css.width=this.$element.outerWidth(),this.$container.width(2*this._css.width),t.parent().attr(i,!0),t=t.removeClass(this.options.cssClass.sub).addClass(this.options.cssClass.root),this.$container.append(t),r.call(this,{marginLeft:-1*this._css.width,speed:n},function(){var s=t.prev();this._history.push(s.detach()),c.call(this,t)}.bind(this)))}function a(t){var e=t&&t.speed!==s?t.speed:this.options.speed,n=this._history.pop();this._level--,this.$element.data("level",this._level),this._css.width=this.$element.outerWidth(),this.$container.width(2*this._css.width),this.$container.prepend(n),r.call(this,{marginLeft:0,speed:e},function(){var t=n.next();t.addClass(this.options.cssClass.sub).removeClass(this.options.cssClass.root),this.$container.find("["+i+"]").last().removeAttr(i).append(t),c.call(this,n)}.bind(this))}function r(t,s){var e=this.$container.children("."+this.options.cssClass.root);e.css(this._css),e.first().animate({marginLeft:t.marginLeft},t.speed,s)}function c(t){t.css({"float":"",width:"",marginLeft:""}),this.$container.css("width","")}return o.prototype={getLevel:function(){return this._level},destroy:function(){this.reset(),this.$element.off(this.options.event+"."+e,this.options.selector)},reset:function(){var t;for(t=this._history.length;t>0;t--)a.call(this,{speed:0});this._history=[],this._css={"float":"left",width:null},this._level=0,this.$element.data("level",this._level)}},o}();t.fn[e]=function(s){return this.each(function(){var i=t.data(this,e),n=s;i?"string"==typeof n&&("destroy"===n&&t.removeData(this,e),"function"==typeof i[n]&&i[n]()):t.data(this,e,new o(this,s))})}});